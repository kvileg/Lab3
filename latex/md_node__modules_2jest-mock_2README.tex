\chapter{jest-\/mock}
\hypertarget{md_node__modules_2jest-mock_2README}{}\label{md_node__modules_2jest-mock_2README}\index{jest-\/mock@{jest-\/mock}}
\label{md_node__modules_2jest-mock_2README_autotoc_md17310}%
\Hypertarget{md_node__modules_2jest-mock_2README_autotoc_md17310}%
 \hypertarget{md_node__modules_2jest-mock_2README_autotoc_md17311}{}\doxysection{\texorpdfstring{API}{API}}\label{md_node__modules_2jest-mock_2README_autotoc_md17311}

\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{ModuleMocker\}\ from\ 'jest-\/mock';}

\end{DoxyCode}
\hypertarget{md_node__modules_2jest-mock_2README_autotoc_md17312}{}\doxysubsection{\texorpdfstring{$<$tt$>$constructor(global)$<$/tt$>$}{<tt>constructor(global)</tt>}}\label{md_node__modules_2jest-mock_2README_autotoc_md17312}
Creates a new module mocker that generates mocks as if they were created in an environment with the given global object.\hypertarget{md_node__modules_2jest-mock_2README_autotoc_md17313}{}\doxysubsection{\texorpdfstring{$<$tt$>$generate\+From\+Metadata(metadata)$<$/tt$>$}{<tt>generateFromMetadata(metadata)</tt>}}\label{md_node__modules_2jest-mock_2README_autotoc_md17313}
Generates a mock based on the given metadata (Metadata for the mock in the schema returned by the get\+Metadata method of this module). Mocks treat functions specially, and all mock functions have additional members, described in the documentation for {\ttfamily fn} in this module.

One important note\+: function prototypes are handled specially by this mocking framework. For functions with prototypes, when called as a constructor, the mock will install mocked function members on the instance. This allows different instances of the same constructor to have different values for its mocks member and its return values.\hypertarget{md_node__modules_2jest-mock_2README_autotoc_md17314}{}\doxysubsection{\texorpdfstring{$<$tt$>$get\+Metadata(component)$<$/tt$>$}{<tt>getMetadata(component)</tt>}}\label{md_node__modules_2jest-mock_2README_autotoc_md17314}
Inspects the argument and returns its schema in the following recursive format\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ type:\ ...}
\DoxyCodeLine{\ \ members:\ \{\}}
\DoxyCodeLine{\}}

\end{DoxyCode}


Where type is one of {\ttfamily array}, {\ttfamily object}, {\ttfamily function}, or {\ttfamily ref}, and members is an optional dictionary where the keys are member names and the values are metadata objects. Function prototypes are defined by defining metadata for the {\ttfamily member.\+prototype} of the function. The type of a function prototype should always be {\ttfamily object}. For instance, a class might be defined like this\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ classDef\ =\ \{}
\DoxyCodeLine{\ \ type:\ 'function',}
\DoxyCodeLine{\ \ members:\ \{}
\DoxyCodeLine{\ \ \ \ staticMethod:\ \{type:\ 'function'\},}
\DoxyCodeLine{\ \ \ \ prototype:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ type:\ 'object',}
\DoxyCodeLine{\ \ \ \ \ \ members:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ instanceMethod:\ \{type:\ 'function'\},}
\DoxyCodeLine{\ \ \ \ \ \ \},}
\DoxyCodeLine{\ \ \ \ \},}
\DoxyCodeLine{\ \ \},}
\DoxyCodeLine{\};}

\end{DoxyCode}


Metadata may also contain references to other objects defined within the same metadata object. The metadata for the referent must be marked with {\ttfamily ref\+ID} key and an arbitrary value. The referrer must be marked with a {\ttfamily ref} key that has the same value as object with ref\+ID that it refers to. For instance, this metadata blob\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ refID\ =\ \{}
\DoxyCodeLine{\ \ type:\ 'object',}
\DoxyCodeLine{\ \ refID:\ 1,}
\DoxyCodeLine{\ \ members:\ \{}
\DoxyCodeLine{\ \ \ \ self:\ \{ref:\ 1\},}
\DoxyCodeLine{\ \ \},}
\DoxyCodeLine{\};}

\end{DoxyCode}


defines an object with a slot named {\ttfamily self} that refers back to the object.\hypertarget{md_node__modules_2jest-mock_2README_autotoc_md17315}{}\doxysubsection{\texorpdfstring{$<$tt$>$fn$<$/tt$>$}{<tt>fn</tt>}}\label{md_node__modules_2jest-mock_2README_autotoc_md17315}
Generates a stand-\/alone function with members that help drive unit tests or confirm expectations. Specifically, functions returned by this method have the following members\+:\hypertarget{md_node__modules_2jest-mock_2README_autotoc_md17316}{}\doxyparagraph{\texorpdfstring{$<$tt$>$.\+mock$<$/tt$>$}{<tt>.mock</tt>}}\label{md_node__modules_2jest-mock_2README_autotoc_md17316}
An object with three members, {\ttfamily calls}, {\ttfamily instances} and {\ttfamily invocation\+Call\+Order}, which are all lists. The items in the {\ttfamily calls} list are the arguments with which the function was called. The "{}instances"{} list stores the value of \textquotesingle{}this\textquotesingle{} for each call to the function. This is useful for retrieving instances from a constructor. The {\ttfamily invocation\+Call\+Order} lists the order in which the mock was called in relation to all mock calls, starting at 1.\hypertarget{md_node__modules_2jest-mock_2README_autotoc_md17317}{}\doxyparagraph{\texorpdfstring{$<$tt$>$.\+mock\+Return\+Value\+Once(value)$<$/tt$>$}{<tt>.mockReturnValueOnce(value)</tt>}}\label{md_node__modules_2jest-mock_2README_autotoc_md17317}
Pushes the given value onto a FIFO queue of return values for the function.\hypertarget{md_node__modules_2jest-mock_2README_autotoc_md17318}{}\doxyparagraph{\texorpdfstring{$<$tt$>$.\+mock\+Return\+Value(value)$<$/tt$>$}{<tt>.mockReturnValue(value)</tt>}}\label{md_node__modules_2jest-mock_2README_autotoc_md17318}
Sets the default return value for the function.\hypertarget{md_node__modules_2jest-mock_2README_autotoc_md17319}{}\doxyparagraph{\texorpdfstring{$<$tt$>$.\+mock\+Implementation\+Once(function)$<$/tt$>$}{<tt>.mockImplementationOnce(function)</tt>}}\label{md_node__modules_2jest-mock_2README_autotoc_md17319}
Pushes the given mock implementation onto a FIFO queue of mock implementations for the function.\hypertarget{md_node__modules_2jest-mock_2README_autotoc_md17320}{}\doxyparagraph{\texorpdfstring{$<$tt$>$.\+mock\+Implementation(function)$<$/tt$>$}{<tt>.mockImplementation(function)</tt>}}\label{md_node__modules_2jest-mock_2README_autotoc_md17320}
Sets the default mock implementation for the function.\hypertarget{md_node__modules_2jest-mock_2README_autotoc_md17321}{}\doxyparagraph{\texorpdfstring{$<$tt$>$.\+mock\+Return\+This()$<$/tt$>$}{<tt>.mockReturnThis()</tt>}}\label{md_node__modules_2jest-mock_2README_autotoc_md17321}
Syntactic sugar for .mock\+Implementation(function() \{return this;\})

In case both {\ttfamily mock\+Implementation\+Once()/mock\+Implementation()} and {\ttfamily mock\+Return\+Value\+Once()/mock\+Return\+Value()} are called. The priority of which to use is based on what is the last call\+:


\begin{DoxyItemize}
\item if the last call is mock\+Return\+Value\+Once() or mock\+Return\+Value(), use the specific return value or default return value. If specific return values are used up or no default return value is set, fall back to try mock\+Implementation();
\item if the last call is mock\+Implementation\+Once() or mock\+Implementation(), run the specific implementation and return the result or run default implementation and return the result. 
\end{DoxyItemize}