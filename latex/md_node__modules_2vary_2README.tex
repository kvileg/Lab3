\chapter{vary}
\hypertarget{md_node__modules_2vary_2README}{}\label{md_node__modules_2vary_2README}\index{vary@{vary}}
\label{md_node__modules_2vary_2README_autotoc_md29287}%
\Hypertarget{md_node__modules_2vary_2README_autotoc_md29287}%
 \href{https://npmjs.org/package/vary}{\texttt{ }} \href{https://npmjs.org/package/vary}{\texttt{ }} \href{https://nodejs.org/en/download}{\texttt{ }} \href{https://travis-ci.org/jshttp/vary}{\texttt{ }} \href{https://coveralls.io/r/jshttp/vary}{\texttt{ }}

Manipulate the HTTP Vary header\hypertarget{md_node__modules_2vary_2README_autotoc_md29288}{}\doxysection{\texorpdfstring{Installation}{Installation}}\label{md_node__modules_2vary_2README_autotoc_md29288}
This is a \href{https://nodejs.org/en/}{\texttt{ Node.\+js}} module available through the \href{https://www.npmjs.com/}{\texttt{ npm registry}}. Installation is done using the \href{https://docs.npmjs.com/getting-started/installing-npm-packages-locally}{\texttt{ {\ttfamily npm install} command}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\$\ npm\ install\ vary}

\end{DoxyCode}
\hypertarget{md_node__modules_2vary_2README_autotoc_md29289}{}\doxysection{\texorpdfstring{API}{API}}\label{md_node__modules_2vary_2README_autotoc_md29289}

\begin{DoxyCode}{0}
\DoxyCodeLine{var\ vary\ =\ require('vary')}

\end{DoxyCode}
\hypertarget{md_node__modules_2vary_2README_autotoc_md29290}{}\doxysubsection{\texorpdfstring{vary(res, field)}{vary(res, field)}}\label{md_node__modules_2vary_2README_autotoc_md29290}
Adds the given header {\ttfamily field} to the {\ttfamily Vary} response header of {\ttfamily res}. This can be a string of a single field, a string of a valid {\ttfamily Vary} header, or an array of multiple fields.

This will append the header if not already listed, otherwise leaves it listed in the current location.


\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Append\ "{}Origin"{}\ to\ the\ Vary\ header\ of\ the\ response}
\DoxyCodeLine{vary(res,\ 'Origin')}

\end{DoxyCode}
\hypertarget{md_node__modules_2vary_2README_autotoc_md29291}{}\doxysubsection{\texorpdfstring{vary.\+append(header, field)}{vary.append(header, field)}}\label{md_node__modules_2vary_2README_autotoc_md29291}
Adds the given header {\ttfamily field} to the {\ttfamily Vary} response header string {\ttfamily header}. This can be a string of a single field, a string of a valid {\ttfamily Vary} header, or an array of multiple fields.

This will append the header if not already listed, otherwise leaves it listed in the current location. The new header string is returned.


\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Get\ header\ string\ appending\ "{}Origin"{}\ to\ "{}Accept,\ User-\/Agent"{}}
\DoxyCodeLine{vary.append('Accept,\ User-\/Agent',\ 'Origin')}

\end{DoxyCode}
\hypertarget{md_node__modules_2vary_2README_autotoc_md29292}{}\doxysection{\texorpdfstring{Examples}{Examples}}\label{md_node__modules_2vary_2README_autotoc_md29292}
\hypertarget{md_node__modules_2vary_2README_autotoc_md29293}{}\doxysubsection{\texorpdfstring{Updating the Vary header when content is based on it}{Updating the Vary header when content is based on it}}\label{md_node__modules_2vary_2README_autotoc_md29293}

\begin{DoxyCode}{0}
\DoxyCodeLine{var\ http\ =\ require('http')}
\DoxyCodeLine{var\ vary\ =\ require('vary')}
\DoxyCodeLine{}
\DoxyCodeLine{http.createServer(function\ onRequest\ (req,\ res)\ \{}
\DoxyCodeLine{\ \ //\ about\ to\ user-\/agent\ sniff}
\DoxyCodeLine{\ \ vary(res,\ 'User-\/Agent')}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ var\ ua\ =\ req.headers['user-\/agent']\ ||\ ''}
\DoxyCodeLine{\ \ var\ isMobile\ =\ /mobi|android|touch|mini/i.test(ua)}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ //\ serve\ site,\ depending\ on\ isMobile}
\DoxyCodeLine{\ \ res.setHeader('Content-\/Type',\ 'text/html')}
\DoxyCodeLine{\ \ res.end('You\ are\ (probably)\ '\ +\ (isMobile\ ?\ ''\ :\ 'not\ ')\ +\ 'a\ mobile\ user')}
\DoxyCodeLine{\})}

\end{DoxyCode}
\hypertarget{md_node__modules_2vary_2README_autotoc_md29294}{}\doxysection{\texorpdfstring{Testing}{Testing}}\label{md_node__modules_2vary_2README_autotoc_md29294}

\begin{DoxyCode}{0}
\DoxyCodeLine{\$\ npm\ test}

\end{DoxyCode}
\hypertarget{md_node__modules_2vary_2README_autotoc_md29295}{}\doxysection{\texorpdfstring{License}{License}}\label{md_node__modules_2vary_2README_autotoc_md29295}
\mbox{[}MIT\mbox{]}(LICENSE) 