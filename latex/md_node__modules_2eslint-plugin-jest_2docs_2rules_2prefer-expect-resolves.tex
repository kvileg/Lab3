\chapter{Prefer \texorpdfstring{$<$}{<}tt\texorpdfstring{$>$}{>}await expect(...).resolves\texorpdfstring{$<$}{<}/tt\texorpdfstring{$>$}{>} over \texorpdfstring{$<$}{<}tt\texorpdfstring{$>$}{>}expect(await ...)\texorpdfstring{$<$}{<}/tt\texorpdfstring{$>$}{>} syntax (\texorpdfstring{$<$}{<}tt\texorpdfstring{$>$}{>}prefer-\/expect-\/resolves\texorpdfstring{$<$}{<}/tt\texorpdfstring{$>$}{>})}
\hypertarget{md_node__modules_2eslint-plugin-jest_2docs_2rules_2prefer-expect-resolves}{}\label{md_node__modules_2eslint-plugin-jest_2docs_2rules_2prefer-expect-resolves}\index{Prefer $<$tt$>$await expect(...).resolves$<$/tt$>$ over $<$tt$>$expect(await ...)$<$/tt$>$ syntax ($<$tt$>$prefer-\/expect-\/resolves$<$/tt$>$)@{Prefer $<$tt$>$await expect(...).resolves$<$/tt$>$ over $<$tt$>$expect(await ...)$<$/tt$>$ syntax ($<$tt$>$prefer-\/expect-\/resolves$<$/tt$>$)}}
\label{md_node__modules_2eslint-plugin-jest_2docs_2rules_2prefer-expect-resolves_autotoc_md11448}%
\Hypertarget{md_node__modules_2eslint-plugin-jest_2docs_2rules_2prefer-expect-resolves_autotoc_md11448}%
 When working with promises, there are two primary ways you can test the resolved value\+:


\begin{DoxyEnumerate}
\item use the {\ttfamily resolve} modifier on {\ttfamily expect} ({\ttfamily await expect(...).resolves.\texorpdfstring{$<$}{<}matcher\texorpdfstring{$>$}{>}} style)
\item {\ttfamily await} the promise and assert against its result ({\ttfamily expect(await ...).\texorpdfstring{$<$}{<}matcher\texorpdfstring{$>$}{>}} style)
\end{DoxyEnumerate}

While the second style is arguably less dependent on {\ttfamily jest}, if the promise rejects it will be treated as a general error, resulting in less predictable behaviour and output from {\ttfamily jest}.

Additionally, favoring the first style ensures consistency with its {\ttfamily rejects} counterpart, as there is no way of "{}awaiting"{} a rejection.\hypertarget{md_node__modules_2eslint-plugin-jest_2docs_2rules_2prefer-expect-resolves_autotoc_md11449}{}\doxysection{\texorpdfstring{Rule details}{Rule details}}\label{md_node__modules_2eslint-plugin-jest_2docs_2rules_2prefer-expect-resolves_autotoc_md11449}
This rule triggers a warning if an {\ttfamily await} is done within an {\ttfamily expect}, and recommends using {\ttfamily resolves} instead.

Examples of {\bfseries{incorrect}} code for this rule


\begin{DoxyCode}{0}
\DoxyCodeLine{it('passes',\ async\ ()\ =>\ \{}
\DoxyCodeLine{\ \ expect(await\ someValue()).toBe(true);}
\DoxyCodeLine{\});}
\DoxyCodeLine{}
\DoxyCodeLine{it('is\ true',\ async\ ()\ =>\ \{}
\DoxyCodeLine{\ \ const\ myPromise\ =\ Promise.resolve(true);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ expect(await\ myPromise).toBe(true);}
\DoxyCodeLine{\});}

\end{DoxyCode}


Examples of {\bfseries{correct}} code for this rule


\begin{DoxyCode}{0}
\DoxyCodeLine{it('passes',\ async\ ()\ =>\ \{}
\DoxyCodeLine{\ \ await\ expect(someValue()).resolves.toBe(true);}
\DoxyCodeLine{\});}
\DoxyCodeLine{}
\DoxyCodeLine{it('is\ true',\ async\ ()\ =>\ \{}
\DoxyCodeLine{\ \ const\ myPromise\ =\ Promise.resolve(true);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ await\ expect(myPromise).resolves.toBe(true);}
\DoxyCodeLine{\});}
\DoxyCodeLine{}
\DoxyCodeLine{it('errors',\ async\ ()\ =>\ \{}
\DoxyCodeLine{\ \ await\ expect(Promise.rejects('oh\ noes!')).rejects.toThrow('oh\ noes!');}
\DoxyCodeLine{\});}

\end{DoxyCode}
 