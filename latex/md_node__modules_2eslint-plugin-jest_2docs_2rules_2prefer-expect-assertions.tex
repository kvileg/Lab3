\chapter{Suggest using \texorpdfstring{$<$}{<}tt\texorpdfstring{$>$}{>}expect.\+assertions()\texorpdfstring{$<$}{<}/tt\texorpdfstring{$>$}{>} OR \texorpdfstring{$<$}{<}tt\texorpdfstring{$>$}{>}expect.\+has\+Assertions()\texorpdfstring{$<$}{<}/tt\texorpdfstring{$>$}{>} (\texorpdfstring{$<$}{<}tt\texorpdfstring{$>$}{>}prefer-\/expect-\/assertions\texorpdfstring{$<$}{<}/tt\texorpdfstring{$>$}{>})}
\hypertarget{md_node__modules_2eslint-plugin-jest_2docs_2rules_2prefer-expect-assertions}{}\label{md_node__modules_2eslint-plugin-jest_2docs_2rules_2prefer-expect-assertions}\index{Suggest using $<$tt$>$expect.assertions()$<$/tt$>$ OR $<$tt$>$expect.hasAssertions()$<$/tt$>$ ($<$tt$>$prefer-\/expect-\/assertions$<$/tt$>$)@{Suggest using $<$tt$>$expect.assertions()$<$/tt$>$ OR $<$tt$>$expect.hasAssertions()$<$/tt$>$ ($<$tt$>$prefer-\/expect-\/assertions$<$/tt$>$)}}
\label{md_node__modules_2eslint-plugin-jest_2docs_2rules_2prefer-expect-assertions_autotoc_md11441}%
\Hypertarget{md_node__modules_2eslint-plugin-jest_2docs_2rules_2prefer-expect-assertions_autotoc_md11441}%
 Ensure every test to have either {\ttfamily expect.\+assertions(\texorpdfstring{$<$}{<}number of assertions\texorpdfstring{$>$}{>})} OR {\ttfamily expect.\+has\+Assertions()} as its first expression.\hypertarget{md_node__modules_2eslint-plugin-jest_2docs_2rules_2prefer-expect-assertions_autotoc_md11442}{}\doxysection{\texorpdfstring{Rule details}{Rule details}}\label{md_node__modules_2eslint-plugin-jest_2docs_2rules_2prefer-expect-assertions_autotoc_md11442}
This rule triggers a warning if,


\begin{DoxyItemize}
\item {\ttfamily expect.\+assertions(\texorpdfstring{$<$}{<}number of assertions\texorpdfstring{$>$}{>})} OR {\ttfamily expect.\+has\+Assertions()} is not present as first statement in a test, e.\+g.\+:
\end{DoxyItemize}


\begin{DoxyCode}{0}
\DoxyCodeLine{test('my\ test',\ ()\ =>\ \{}
\DoxyCodeLine{\ \ expect(someThing()).toEqual('foo');}
\DoxyCodeLine{\});}

\end{DoxyCode}



\begin{DoxyItemize}
\item {\ttfamily expect.\+assertions(\texorpdfstring{$<$}{<}number of assertions\texorpdfstring{$>$}{>})} is the first statement in a test where argument passed to {\ttfamily expect.\+assertions(\texorpdfstring{$<$}{<}number of assertions\texorpdfstring{$>$}{>})} is not a valid number, e.\+g.\+:
\end{DoxyItemize}


\begin{DoxyCode}{0}
\DoxyCodeLine{test('my\ test',\ ()\ =>\ \{}
\DoxyCodeLine{\ \ expect.assertions('1');}
\DoxyCodeLine{\ \ expect(someThing()).toEqual('foo');}
\DoxyCodeLine{\});}

\end{DoxyCode}
\hypertarget{md_node__modules_2eslint-plugin-jest_2docs_2rules_2prefer-expect-assertions_autotoc_md11443}{}\doxysubsection{\texorpdfstring{Default configuration}{Default configuration}}\label{md_node__modules_2eslint-plugin-jest_2docs_2rules_2prefer-expect-assertions_autotoc_md11443}
The following patterns are considered warnings\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{test('my\ test',\ ()\ =>\ \{}
\DoxyCodeLine{\ \ expect.assertions('1');}
\DoxyCodeLine{\ \ expect(someThing()).toEqual('foo');}
\DoxyCodeLine{\});}
\DoxyCodeLine{}
\DoxyCodeLine{test('my\ test',\ ()\ =>\ \{}
\DoxyCodeLine{\ \ expect(someThing()).toEqual('foo');}
\DoxyCodeLine{\});}

\end{DoxyCode}


The following patterns would not be considered warnings\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{test('my\ test',\ ()\ =>\ \{}
\DoxyCodeLine{\ \ expect.assertions(1);}
\DoxyCodeLine{\ \ expect(someThing()).toEqual('foo');}
\DoxyCodeLine{\});}
\DoxyCodeLine{}
\DoxyCodeLine{test('my\ test',\ ()\ =>\ \{}
\DoxyCodeLine{\ \ expect.hasAssertions();}
\DoxyCodeLine{\ \ expect(someThing()).toEqual('foo');}
\DoxyCodeLine{\});}

\end{DoxyCode}
\hypertarget{md_node__modules_2eslint-plugin-jest_2docs_2rules_2prefer-expect-assertions_autotoc_md11444}{}\doxysection{\texorpdfstring{Options}{Options}}\label{md_node__modules_2eslint-plugin-jest_2docs_2rules_2prefer-expect-assertions_autotoc_md11444}
This rule can be configured to only check tests that match certain patterns that typically look like {\ttfamily expect} calls might be missed, such as in promises or loops.

By default, none of these options are enabled meaning the rule checks {\itshape every} test for a call to either {\ttfamily expect.\+has\+Assertions} or {\ttfamily expect.\+assertions}. If any of the options are enabled the rule checks any test that matches {\itshape at least one} of the patterns represented by the enabled options (think "{}\+OR"{} rather than "{}\+AND"{}).\hypertarget{md_node__modules_2eslint-plugin-jest_2docs_2rules_2prefer-expect-assertions_autotoc_md11445}{}\doxysubsubsection{\texorpdfstring{$<$tt$>$only\+Functions\+With\+Async\+Keyword$<$/tt$>$}{<tt>onlyFunctionsWithAsyncKeyword</tt>}}\label{md_node__modules_2eslint-plugin-jest_2docs_2rules_2prefer-expect-assertions_autotoc_md11445}
When {\ttfamily true}, this rule will only warn for tests that use the {\ttfamily async} keyword.


\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ "{}rules"{}:\ \{}
\DoxyCodeLine{\ \ \ \ "{}jest/prefer-\/expect-\/assertions"{}:\ [}
\DoxyCodeLine{\ \ \ \ \ \ "{}warn"{},}
\DoxyCodeLine{\ \ \ \ \ \ \{\ "{}onlyFunctionsWithAsyncKeyword"{}:\ true\ \}}
\DoxyCodeLine{\ \ \ \ ]}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}


When {\ttfamily only\+Functions\+With\+Async\+Keyword} option is set to {\ttfamily true}, the following pattern would be a warning\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{test('my\ test',\ async\ ()\ =>\ \{}
\DoxyCodeLine{\ \ const\ result\ =\ await\ someAsyncFunc();}
\DoxyCodeLine{\ \ expect(result).toBe('foo');}
\DoxyCodeLine{\});}

\end{DoxyCode}


While the following patterns would not be considered warnings\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{test('my\ test',\ ()\ =>\ \{}
\DoxyCodeLine{\ \ const\ result\ =\ someFunction();}
\DoxyCodeLine{\ \ expect(result).toBe('foo');}
\DoxyCodeLine{\});}
\DoxyCodeLine{}
\DoxyCodeLine{test('my\ test',\ async\ ()\ =>\ \{}
\DoxyCodeLine{\ \ expect.assertions(1);}
\DoxyCodeLine{\ \ const\ result\ =\ await\ someAsyncFunc();}
\DoxyCodeLine{\ \ expect(result).toBe('foo');}
\DoxyCodeLine{\});}

\end{DoxyCode}
\hypertarget{md_node__modules_2eslint-plugin-jest_2docs_2rules_2prefer-expect-assertions_autotoc_md11446}{}\doxysubsubsection{\texorpdfstring{$<$tt$>$only\+Functions\+With\+Expect\+In\+Loop$<$/tt$>$}{<tt>onlyFunctionsWithExpectInLoop</tt>}}\label{md_node__modules_2eslint-plugin-jest_2docs_2rules_2prefer-expect-assertions_autotoc_md11446}
When {\ttfamily true}, this rule will only warn for tests that have {\ttfamily expect} calls within a native loop.


\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ "{}rules"{}:\ \{}
\DoxyCodeLine{\ \ \ \ "{}jest/prefer-\/expect-\/assertions"{}:\ [}
\DoxyCodeLine{\ \ \ \ \ \ "{}warn"{},}
\DoxyCodeLine{\ \ \ \ \ \ \{\ "{}onlyFunctionsWithAsyncKeyword"{}:\ true\ \}}
\DoxyCodeLine{\ \ \ \ ]}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}


Examples of {\bfseries{incorrect}} code when `\textquotesingle{}only\+Functions\+With\+Expect\+In\+Loop'{\ttfamily is}true\`{}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{describe('getNumbers',\ ()\ =>\ \{}
\DoxyCodeLine{\ \ it('only\ returns\ numbers\ that\ are\ greater\ than\ zero',\ ()\ =>\ \{}
\DoxyCodeLine{\ \ \ \ const\ numbers\ =\ getNumbers();}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ for\ (const\ number\ in\ numbers)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ expect(number).toBeGreaterThan(0);}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\ \ \});}
\DoxyCodeLine{\});}

\end{DoxyCode}


Examples of {\bfseries{correct}} code when `\textquotesingle{}only\+Functions\+With\+Expect\+In\+Loop'{\ttfamily is}true\`{}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{describe('getNumbers',\ ()\ =>\ \{}
\DoxyCodeLine{\ \ it('only\ returns\ numbers\ that\ are\ greater\ than\ zero',\ ()\ =>\ \{}
\DoxyCodeLine{\ \ \ \ expect.hasAssertions();}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ const\ numbers\ =\ getNumbers();}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ for\ (const\ number\ in\ numbers)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ expect(number).toBeGreaterThan(0);}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\ \ \});}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ it('returns\ more\ than\ one\ number',\ ()\ =>\ \{}
\DoxyCodeLine{\ \ \ \ expect(getNumbers().length).toBeGreaterThan(1);}
\DoxyCodeLine{\ \ \});}
\DoxyCodeLine{\});}

\end{DoxyCode}
\hypertarget{md_node__modules_2eslint-plugin-jest_2docs_2rules_2prefer-expect-assertions_autotoc_md11447}{}\doxysubsubsection{\texorpdfstring{$<$tt$>$only\+Functions\+With\+Expect\+In\+Callback$<$/tt$>$}{<tt>onlyFunctionsWithExpectInCallback</tt>}}\label{md_node__modules_2eslint-plugin-jest_2docs_2rules_2prefer-expect-assertions_autotoc_md11447}
When {\ttfamily true}, this rule will only warn for tests that have {\ttfamily expect} calls within a callback.


\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ "{}rules"{}:\ \{}
\DoxyCodeLine{\ \ \ \ "{}jest/prefer-\/expect-\/assertions"{}:\ [}
\DoxyCodeLine{\ \ \ \ \ \ "{}warn"{},}
\DoxyCodeLine{\ \ \ \ \ \ \{\ "{}onlyFunctionsWithExpectInCallback"{}:\ true\ \}}
\DoxyCodeLine{\ \ \ \ ]}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}


Examples of {\bfseries{incorrect}} code when `\textquotesingle{}only\+Functions\+With\+Expect\+In\+Callback'{\ttfamily is }true\`{}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{describe('getNumbers',\ ()\ =>\ \{}
\DoxyCodeLine{\ \ it('only\ returns\ numbers\ that\ are\ greater\ than\ zero',\ ()\ =>\ \{}
\DoxyCodeLine{\ \ \ \ const\ numbers\ =\ getNumbers();}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ getNumbers().forEach(number\ =>\ \{}
\DoxyCodeLine{\ \ \ \ \ \ expect(number).toBeGreaterThan(0);}
\DoxyCodeLine{\ \ \ \ \});}
\DoxyCodeLine{\ \ \});}
\DoxyCodeLine{\});}
\DoxyCodeLine{}
\DoxyCodeLine{describe('/users',\ ()\ =>\ \{}
\DoxyCodeLine{\ \ it.each([1,\ 2,\ 3])('returns\ ok',\ id\ =>\ \{}
\DoxyCodeLine{\ \ \ \ client.get(`/users/\$\{id\}`,\ response\ =>\ \{}
\DoxyCodeLine{\ \ \ \ \ \ expect(response.status).toBe(200);}
\DoxyCodeLine{\ \ \ \ \});}
\DoxyCodeLine{\ \ \});}
\DoxyCodeLine{\});}

\end{DoxyCode}


Examples of {\bfseries{correct}} code when `\textquotesingle{}only\+Functions\+With\+Expect\+In\+Callback'{\ttfamily is }true\`{}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{describe('getNumbers',\ ()\ =>\ \{}
\DoxyCodeLine{\ \ it('only\ returns\ numbers\ that\ are\ greater\ than\ zero',\ ()\ =>\ \{}
\DoxyCodeLine{\ \ \ \ expect.hasAssertions();}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ const\ numbers\ =\ getNumbers();}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ getNumbers().forEach(number\ =>\ \{}
\DoxyCodeLine{\ \ \ \ \ \ expect(number).toBeGreaterThan(0);}
\DoxyCodeLine{\ \ \ \ \});}
\DoxyCodeLine{\ \ \});}
\DoxyCodeLine{\});}
\DoxyCodeLine{}
\DoxyCodeLine{describe('/users',\ ()\ =>\ \{}
\DoxyCodeLine{\ \ it.each([1,\ 2,\ 3])('returns\ ok',\ id\ =>\ \{}
\DoxyCodeLine{\ \ \ \ expect.assertions(3);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ client.get(`/users/\$\{id\}`,\ response\ =>\ \{}
\DoxyCodeLine{\ \ \ \ \ \ expect(response.status).toBe(200);}
\DoxyCodeLine{\ \ \ \ \});}
\DoxyCodeLine{\ \ \});}
\DoxyCodeLine{\});}

\end{DoxyCode}
 