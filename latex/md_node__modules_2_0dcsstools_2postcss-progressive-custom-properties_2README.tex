\chapter{Post\+CSS Progressive Custom Properties \texorpdfstring{$<$}{<}a href="{}https\+://github.\+com/postcss/postcss"{} \texorpdfstring{$>$}{>}\texorpdfstring{$<$}{<}img src=\textbackslash{}"{}https\+://postcss.\+github.\+io/postcss/logo.\+svg\textbackslash{}"{} alt=\textbackslash{}"{}\+Post\+CSS\textbackslash{}"{} width=\textbackslash{}"{}90\textbackslash{}"{} height=\textbackslash{}"{}90\textbackslash{}"{} align=\textbackslash{}"{}right\textbackslash{}"{}\texorpdfstring{$>$}{>}\texorpdfstring{$<$}{<}/a\texorpdfstring{$>$}{>}}
\hypertarget{md_node__modules_2_0dcsstools_2postcss-progressive-custom-properties_2README}{}\label{md_node__modules_2_0dcsstools_2postcss-progressive-custom-properties_2README}\index{PostCSS Progressive Custom Properties $<$a href="{}https://github.com/postcss/postcss"{} $>$$<$img src=\textbackslash{}"{}https://postcss.github.io/postcss/logo.svg\textbackslash{}"{} alt=\textbackslash{}"{}PostCSS\textbackslash{}"{} width=\textbackslash{}"{}90\textbackslash{}"{} height=\textbackslash{}"{}90\textbackslash{}"{} align=\textbackslash{}"{}right\textbackslash{}"{}$>$$<$/a$>$@{PostCSS Progressive Custom Properties $<$a href=""https://github.com/postcss/postcss"" $>$$<$img src=\textbackslash{}""https://postcss.github.io/postcss/logo.svg\textbackslash{}"" alt=\textbackslash{}""PostCSS\textbackslash{}"" width=\textbackslash{}""90\textbackslash{}"" height=\textbackslash{}""90\textbackslash{}"" align=\textbackslash{}""right\textbackslash{}""$>$$<$/a$>$}}
\label{md_node__modules_2_0dcsstools_2postcss-progressive-custom-properties_2README_autotoc_md739}%
\Hypertarget{md_node__modules_2_0dcsstools_2postcss-progressive-custom-properties_2README_autotoc_md739}%
 \href{https://www.npmjs.com/package/@csstools/postcss-progressive-custom-properties}{\texttt{ }} \href{https://github.com/csstools/postcss-plugins/actions/workflows/test.yml?query=workflow/test}{\texttt{ }} \href{https://discord.gg/bUadyRwkJS}{\texttt{ \texorpdfstring{$<$}{<}img alt="{}Discord"{} src="{}https\+://shields.\+io/badge/\+Discord-\/5865\+F2?logo=discord\&logo\+Color=white"{}\texorpdfstring{$>$}{>}}}

\href{https://github.com/csstools/postcss-plugins/tree/main/plugins/postcss-progressive-custom-properties}{\texttt{ Post\+CSS Progressive Custom Properties}} is a utility plugin to correctly declare Custom Property fallbacks and enhancements.

⚠️ It is not intended to be used directly by stylesheet authors. Meant to be included in other Post\+CSS plugins that provide CSS value transforms as fallbacks.

\href{https://www.w3.org/TR/css-variables-1/\#invalid-variables}{\texttt{ Custom Properties are not discarded like regular declarations when invalid.}} This makes it tricky to provide fallback values for older browsers.

The solution is to wrap Custom Property declarations in an {\ttfamily @supports} rule.


\begin{DoxyCode}{0}
\DoxyCodeLine{:root\ \{}
\DoxyCodeLine{\ \ \ \ /*\ fallback\ */}
\DoxyCodeLine{\ \ \ \ -\/-\/a-\/color:\ red;}
\DoxyCodeLine{\ \ \ \ /*\ progressive\ enhancement\ */}
\DoxyCodeLine{\ \ \ \ -\/-\/a-\/color:\ oklch(40\%\ 0.234\ 0.39\ /\ var(-\/-\/opacity-\/50));}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{/*\ becomes\ */}
\DoxyCodeLine{}
\DoxyCodeLine{:root\ \{}
\DoxyCodeLine{\ \ \ \ -\/-\/a-\/color:\ red;}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{@supports\ (color:\ oklch(0\%\ 0\ 0))\ \{}
\DoxyCodeLine{\ \ \ \ :root\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ -\/-\/a-\/color:\ oklch(40\%\ 0.234\ 0.39\ /\ var(-\/-\/opacity-\/50));}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md_node__modules_2_0dcsstools_2postcss-progressive-custom-properties_2README_autotoc_md740}{}\doxysection{\texorpdfstring{Ignored values}{Ignored values}}\label{md_node__modules_2_0dcsstools_2postcss-progressive-custom-properties_2README_autotoc_md740}
{\ttfamily initial} and {\ttfamily \texorpdfstring{$<$}{<}white space\texorpdfstring{$>$}{>}} are ignored.


\begin{DoxyCode}{0}
\DoxyCodeLine{.initial\ \{}
\DoxyCodeLine{\ \ \ \ -\/-\/prop-\/1:\ red;}
\DoxyCodeLine{\ \ \ \ -\/-\/prop-\/1:\ initial;}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{.white-\/space\ \{}
\DoxyCodeLine{\ \ \ \ -\/-\/prop-\/1:\ red;}
\DoxyCodeLine{\ \ \ \ -\/-\/prop-\/1:;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ -\/-\/prop-\/2:\ red;}
\DoxyCodeLine{\ \ \ \ -\/-\/prop-\/2:\ ;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ -\/-\/prop-\/3:\ red;}
\DoxyCodeLine{\ \ \ \ -\/-\/prop-\/3:\ \ \ \ ;}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{/*\ remains\ */}
\DoxyCodeLine{}
\DoxyCodeLine{.initial\ \{}
\DoxyCodeLine{\ \ \ \ -\/-\/prop-\/1:\ red;}
\DoxyCodeLine{\ \ \ \ -\/-\/prop-\/1:\ initial;}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{.white-\/space\ \{}
\DoxyCodeLine{\ \ \ \ -\/-\/prop-\/1:\ red;}
\DoxyCodeLine{\ \ \ \ -\/-\/prop-\/1:;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ -\/-\/prop-\/2:\ red;}
\DoxyCodeLine{\ \ \ \ -\/-\/prop-\/2:\ ;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ -\/-\/prop-\/3:\ red;}
\DoxyCodeLine{\ \ \ \ -\/-\/prop-\/3:\ \ \ \ ;}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md_node__modules_2_0dcsstools_2postcss-progressive-custom-properties_2README_autotoc_md741}{}\doxysection{\texorpdfstring{Usage}{Usage}}\label{md_node__modules_2_0dcsstools_2postcss-progressive-custom-properties_2README_autotoc_md741}
Add \href{https://github.com/csstools/postcss-plugins/tree/main/plugins/postcss-progressive-custom-properties}{\texttt{ Post\+CSS Progressive Custom Properties}} to your project\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{npm\ install\ @csstools/postcss-\/progressive-\/custom-\/properties\ -\/-\/save-\/dev}

\end{DoxyCode}


Use \href{https://github.com/csstools/postcss-plugins/tree/main/plugins/postcss-progressive-custom-properties}{\texttt{ Post\+CSS Progressive Custom Properties}} as a \href{https://github.com/postcss/postcss}{\texttt{ Post\+CSS}} plugin\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ postcss\ =\ require('postcss');}
\DoxyCodeLine{const\ postcssCustomProperties\ =\ require('@csstools/postcss-\/progressive-\/custom-\/properties');}
\DoxyCodeLine{}
\DoxyCodeLine{postcss([}
\DoxyCodeLine{\ \ postcssProgressiveCustomProperties()}
\DoxyCodeLine{]).process(YOUR\_CSS\ /*,\ processOptions\ */);}

\end{DoxyCode}
\hypertarget{md_node__modules_2_0dcsstools_2postcss-progressive-custom-properties_2README_autotoc_md742}{}\doxysection{\texorpdfstring{@supports}{@supports}}\label{md_node__modules_2_0dcsstools_2postcss-progressive-custom-properties_2README_autotoc_md742}
This plugin wraps Custom Property override declarations in an {\ttfamily @supports} rule. With Post\+CSS 8 this trigger declaration visitors to run again.

Make sure your plugin detects and ignores values inside relevant {\ttfamily @supports} rules.

\href{https://github.com/csstools/postcss-plugins/tree/main/plugins/postcss-progressive-custom-properties}{\texttt{ Post\+CSS Progressive Custom Properties}} runs in all Node environments, with special instructions for\+:

\texorpdfstring{$\vert$}{|} \href{INSTALL.md\#node}{\texttt{ Node}} \texorpdfstring{$\vert$}{|} \href{INSTALL.md\#postcss-cli}{\texttt{ Post\+CSS CLI}} \texorpdfstring{$\vert$}{|} \href{INSTALL.md\#webpack}{\texttt{ Webpack}} \texorpdfstring{$\vert$}{|} \href{INSTALL.md\#create-react-app}{\texttt{ Create React App}} \texorpdfstring{$\vert$}{|} \href{INSTALL.md\#gulp}{\texttt{ Gulp}} \texorpdfstring{$\vert$}{|} \href{INSTALL.md\#grunt}{\texttt{ Grunt}} \texorpdfstring{$\vert$}{|} \texorpdfstring{$\vert$}{|} --- \texorpdfstring{$\vert$}{|} --- \texorpdfstring{$\vert$}{|} --- \texorpdfstring{$\vert$}{|} --- \texorpdfstring{$\vert$}{|} --- \texorpdfstring{$\vert$}{|} --- \texorpdfstring{$\vert$}{|} 