\chapter{Enforce valid \texorpdfstring{$<$}{<}tt\texorpdfstring{$>$}{>}expect()\texorpdfstring{$<$}{<}/tt\texorpdfstring{$>$}{>} usage (\texorpdfstring{$<$}{<}tt\texorpdfstring{$>$}{>}valid-\/expect\texorpdfstring{$<$}{<}/tt\texorpdfstring{$>$}{>})}
\hypertarget{md_node__modules_2eslint-plugin-jest_2docs_2rules_2valid-expect}{}\label{md_node__modules_2eslint-plugin-jest_2docs_2rules_2valid-expect}\index{Enforce valid $<$tt$>$expect()$<$/tt$>$ usage ($<$tt$>$valid-\/expect$<$/tt$>$)@{Enforce valid $<$tt$>$expect()$<$/tt$>$ usage ($<$tt$>$valid-\/expect$<$/tt$>$)}}
\label{md_node__modules_2eslint-plugin-jest_2docs_2rules_2valid-expect_autotoc_md11492}%
\Hypertarget{md_node__modules_2eslint-plugin-jest_2docs_2rules_2valid-expect_autotoc_md11492}%
 Ensure {\ttfamily expect()} is called with a single argument and there is an actual expectation made.\hypertarget{md_node__modules_2eslint-plugin-jest_2docs_2rules_2valid-expect_autotoc_md11493}{}\doxysection{\texorpdfstring{Rule details}{Rule details}}\label{md_node__modules_2eslint-plugin-jest_2docs_2rules_2valid-expect_autotoc_md11493}
This rule triggers a warning if {\ttfamily expect()} is called with more than one argument or without arguments. It would also issue a warning if there is nothing called on {\ttfamily expect()}, e.\+g.\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{expect();}
\DoxyCodeLine{expect('something');}

\end{DoxyCode}


or when a matcher function was not called, e.\+g.\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{expect(true).toBeDefined;}

\end{DoxyCode}


or when an async assertion was not {\ttfamily await}ed or returned, e.\+g.\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{expect(Promise.resolve('Hi!')).resolves.toBe('Hi!');}

\end{DoxyCode}


This rule is enabled by default.\hypertarget{md_node__modules_2eslint-plugin-jest_2docs_2rules_2valid-expect_autotoc_md11494}{}\doxysection{\texorpdfstring{Options}{Options}}\label{md_node__modules_2eslint-plugin-jest_2docs_2rules_2valid-expect_autotoc_md11494}

\begin{DoxyCode}{0}
\DoxyCodeLine{\ 5}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ type:\ 'object',}
\DoxyCodeLine{\ \ properties:\ \{}
\DoxyCodeLine{\ \ \ \ alwaysAwait:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ type:\ 'boolean',}
\DoxyCodeLine{\ \ \ \ \ \ default:\ false,}
\DoxyCodeLine{\ \ \ \ \},}
\DoxyCodeLine{\ \ \ \ asyncMatchers:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ type:\ 'array',}
\DoxyCodeLine{\ \ \ \ \ \ items:\ \{\ type:\ 'string'\ \},}
\DoxyCodeLine{\ \ \ \ \ \ default:\ ['toResolve',\ 'toReject'],}
\DoxyCodeLine{\ \ \ \ \},}
\DoxyCodeLine{\ \ \ \ minArgs:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ type:\ 'number',}
\DoxyCodeLine{\ \ \ \ \ \ minimum:\ 1,}
\DoxyCodeLine{\ \ \ \ \},}
\DoxyCodeLine{\ \ \ \ maxArgs:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ type:\ 'number',}
\DoxyCodeLine{\ \ \ \ \ \ minimum:\ 1,}
\DoxyCodeLine{\ \ \ \ \},}
\DoxyCodeLine{\ \ \},}
\DoxyCodeLine{\ \ additionalProperties:\ false,}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md_node__modules_2eslint-plugin-jest_2docs_2rules_2valid-expect_autotoc_md11495}{}\doxysubsection{\texorpdfstring{$<$tt$>$always\+Await$<$/tt$>$}{<tt>alwaysAwait</tt>}}\label{md_node__modules_2eslint-plugin-jest_2docs_2rules_2valid-expect_autotoc_md11495}
Enforces to use {\ttfamily await} inside block statements. Using {\ttfamily return} will trigger a warning. Returning one line statements with arrow functions is {\itshape always allowed}.

Examples of {\bfseries{incorrect}} code for the \{ "{}always\+Await"{}\+: {\bfseries{true}} \} option\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{//\ alwaysAwait:\ true}
\DoxyCodeLine{test('test1',\ async\ ()\ =>\ \{}
\DoxyCodeLine{\ \ await\ expect(Promise.resolve(2)).resolves.toBeDefined();}
\DoxyCodeLine{\ \ return\ expect(Promise.resolve(1)).resolves.toBe(1);\ //\ \`{}return`\ statement\ will\ trigger\ a\ warning}
\DoxyCodeLine{\});}

\end{DoxyCode}


Examples of {\bfseries{correct}} code for the \{ "{}always\+Await"{}\+: {\bfseries{true}} \} option\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{//\ alwaysAwait:\ true}
\DoxyCodeLine{test('test1',\ async\ ()\ =>\ \{}
\DoxyCodeLine{\ \ await\ expect(Promise.resolve(2)).resolves.toBeDefined();}
\DoxyCodeLine{\ \ await\ expect(Promise.resolve(1)).resolves.toBe(1);}
\DoxyCodeLine{\});}
\DoxyCodeLine{}
\DoxyCodeLine{test('test2',\ ()\ =>\ expect(Promise.resolve(2)).resolves.toBe(2));}

\end{DoxyCode}
\hypertarget{md_node__modules_2eslint-plugin-jest_2docs_2rules_2valid-expect_autotoc_md11496}{}\doxysubsection{\texorpdfstring{$<$tt$>$async\+Matchers$<$/tt$>$}{<tt>asyncMatchers</tt>}}\label{md_node__modules_2eslint-plugin-jest_2docs_2rules_2valid-expect_autotoc_md11496}
Allows specifying which matchers return promises, and so should be considered async when checking if an {\ttfamily expect} should be returned or awaited.

By default, this has a list of all the async matchers provided by {\ttfamily jest-\/extended} (namely, {\ttfamily to\+Resolve} and {\ttfamily to\+Reject}).\hypertarget{md_node__modules_2eslint-plugin-jest_2docs_2rules_2valid-expect_autotoc_md11497}{}\doxysubsection{\texorpdfstring{$<$tt$>$min\+Args$<$/tt$>$ \& $<$tt$>$max\+Args$<$/tt$>$}{<tt>minArgs</tt> \& <tt>maxArgs</tt>}}\label{md_node__modules_2eslint-plugin-jest_2docs_2rules_2valid-expect_autotoc_md11497}
Enforces the minimum and maximum number of arguments that {\ttfamily expect} can take, and is required to take.

Both of these properties have a default value of {\ttfamily 1}, which is the number of arguments supported by vanilla {\ttfamily expect}.

This is useful when you\textquotesingle{}re using libraries that increase the number of arguments supported by {\ttfamily expect}, such as \href{https://www.npmjs.com/package/jest-expect-message}{\texttt{ {\ttfamily jest-\/expect-\/message}}}.\hypertarget{md_node__modules_2eslint-plugin-jest_2docs_2rules_2valid-expect_autotoc_md11498}{}\doxysubsection{\texorpdfstring{Default configuration}{Default configuration}}\label{md_node__modules_2eslint-plugin-jest_2docs_2rules_2valid-expect_autotoc_md11498}
The following patterns are considered warnings\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{test('all\ the\ things',\ async\ ()\ =>\ \{}
\DoxyCodeLine{\ \ expect();}
\DoxyCodeLine{\ \ expect().toEqual('something');}
\DoxyCodeLine{\ \ expect('something',\ 'else');}
\DoxyCodeLine{\ \ expect('something');}
\DoxyCodeLine{\ \ await\ expect('something');}
\DoxyCodeLine{\ \ expect(true).toBeDefined;}
\DoxyCodeLine{\ \ expect(Promise.resolve('hello')).resolves;}
\DoxyCodeLine{\ \ expect(Promise.resolve('hello')).resolves.toEqual('hello');}
\DoxyCodeLine{\ \ Promise.resolve(expect(Promise.resolve('hello')).resolves.toEqual('hello'));}
\DoxyCodeLine{\ \ Promise.all([}
\DoxyCodeLine{\ \ \ \ expect(Promise.resolve('hello')).resolves.toEqual('hello'),}
\DoxyCodeLine{\ \ \ \ expect(Promise.resolve('hi')).resolves.toEqual('hi'),}
\DoxyCodeLine{\ \ ]);}
\DoxyCodeLine{\});}

\end{DoxyCode}


The following patterns are not warnings\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{test('all\ the\ things',\ async\ ()\ =>\ \{}
\DoxyCodeLine{\ \ expect('something').toEqual('something');}
\DoxyCodeLine{\ \ expect([1,\ 2,\ 3]).toEqual([1,\ 2,\ 3]);}
\DoxyCodeLine{\ \ expect(true).toBeDefined();}
\DoxyCodeLine{\ \ await\ expect(Promise.resolve('hello')).resolves.toEqual('hello');}
\DoxyCodeLine{\ \ await\ Promise.resolve(}
\DoxyCodeLine{\ \ \ \ expect(Promise.resolve('hello')).resolves.toEqual('hello'),}
\DoxyCodeLine{\ \ );}
\DoxyCodeLine{\ \ await\ Promise.all(}
\DoxyCodeLine{\ \ \ \ expect(Promise.resolve('hello')).resolves.toEqual('hello'),}
\DoxyCodeLine{\ \ \ \ expect(Promise.resolve('hi')).resolves.toEqual('hi'),}
\DoxyCodeLine{\ \ );}
\DoxyCodeLine{\});}

\end{DoxyCode}
 