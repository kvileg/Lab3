\chapter{merge2}
\hypertarget{md_node__modules_2merge2_2README}{}\label{md_node__modules_2merge2_2README}\index{merge2@{merge2}}
\label{md_node__modules_2merge2_2README_autotoc_md18877}%
\Hypertarget{md_node__modules_2merge2_2README_autotoc_md18877}%
 Merge multiple streams into one stream in sequence or parallel.

\href{https://npmjs.org/package/merge2}{\texttt{ }} \href{https://travis-ci.org/teambition/merge2}{\texttt{ }} \href{https://npmjs.org/package/merge2}{\texttt{ }}\hypertarget{md_node__modules_2merge2_2README_autotoc_md18878}{}\doxysection{\texorpdfstring{Install}{Install}}\label{md_node__modules_2merge2_2README_autotoc_md18878}
Install with \href{https://npmjs.org/package/merge2}{\texttt{ npm}}


\begin{DoxyCode}{0}
\DoxyCodeLine{npm\ install\ merge2}

\end{DoxyCode}
\hypertarget{md_node__modules_2merge2_2README_autotoc_md18879}{}\doxysection{\texorpdfstring{Usage}{Usage}}\label{md_node__modules_2merge2_2README_autotoc_md18879}

\begin{DoxyCode}{0}
\DoxyCodeLine{const\ gulp\ =\ require('gulp')}
\DoxyCodeLine{const\ merge2\ =\ require('merge2')}
\DoxyCodeLine{const\ concat\ =\ require('gulp-\/concat')}
\DoxyCodeLine{const\ minifyHtml\ =\ require('gulp-\/minify-\/html')}
\DoxyCodeLine{const\ ngtemplate\ =\ require('gulp-\/ngtemplate')}
\DoxyCodeLine{}
\DoxyCodeLine{gulp.task('app-\/js',\ function\ ()\ \{}
\DoxyCodeLine{\ \ return\ merge2(}
\DoxyCodeLine{\ \ \ \ \ \ gulp.src('static/src/tpl/*.html')}
\DoxyCodeLine{\ \ \ \ \ \ \ \ .pipe(minifyHtml(\{empty:\ true\}))}
\DoxyCodeLine{\ \ \ \ \ \ \ \ .pipe(ngtemplate(\{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ module:\ 'genTemplates',}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ standalone:\ true}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \})}
\DoxyCodeLine{\ \ \ \ \ \ ),\ gulp.src([}
\DoxyCodeLine{\ \ \ \ \ \ \ \ 'static/src/js/app.js',}
\DoxyCodeLine{\ \ \ \ \ \ \ \ 'static/src/js/locale\_zh-\/cn.js',}
\DoxyCodeLine{\ \ \ \ \ \ \ \ 'static/src/js/router.js',}
\DoxyCodeLine{\ \ \ \ \ \ \ \ 'static/src/js/tools.js',}
\DoxyCodeLine{\ \ \ \ \ \ \ \ 'static/src/js/services.js',}
\DoxyCodeLine{\ \ \ \ \ \ \ \ 'static/src/js/filters.js',}
\DoxyCodeLine{\ \ \ \ \ \ \ \ 'static/src/js/directives.js',}
\DoxyCodeLine{\ \ \ \ \ \ \ \ 'static/src/js/controllers.js'}
\DoxyCodeLine{\ \ \ \ \ \ ])}
\DoxyCodeLine{\ \ \ \ )}
\DoxyCodeLine{\ \ \ \ .pipe(concat('app.js'))}
\DoxyCodeLine{\ \ \ \ .pipe(gulp.dest('static/dist/js/'))}
\DoxyCodeLine{\})}

\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{const\ stream\ =\ merge2([stream1,\ stream2],\ stream3,\ \{end:\ false\})}
\DoxyCodeLine{//...}
\DoxyCodeLine{stream.add(stream4,\ stream5)}
\DoxyCodeLine{//..}
\DoxyCodeLine{stream.end()}

\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{//\ equal\ to\ merge2([stream1,\ stream2],\ stream3)}
\DoxyCodeLine{const\ stream\ =\ merge2()}
\DoxyCodeLine{stream.add([stream1,\ stream2])}
\DoxyCodeLine{stream.add(stream3)}

\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{//\ merge\ order:}
\DoxyCodeLine{//\ \ \ 1.\ merge\ \`{}stream1`;}
\DoxyCodeLine{//\ \ \ 2.\ merge\ \`{}stream2`\ and\ \`{}stream3`\ in\ parallel\ after\ \`{}stream1`\ merged;}
\DoxyCodeLine{//\ \ \ 3.\ merge\ 'stream4'\ after\ \`{}stream2`\ and\ \`{}stream3`\ merged;}
\DoxyCodeLine{const\ stream\ =\ merge2(stream1,\ [stream2,\ stream3],\ stream4)}
\DoxyCodeLine{}
\DoxyCodeLine{//\ merge\ order:}
\DoxyCodeLine{//\ \ \ 1.\ merge\ \`{}stream5`\ and\ \`{}stream6`\ in\ parallel\ after\ \`{}stream4`\ merged;}
\DoxyCodeLine{//\ \ \ 2.\ merge\ 'stream7'\ after\ \`{}stream5`\ and\ \`{}stream6`\ merged;}
\DoxyCodeLine{stream.add([stream5,\ stream6],\ stream7)}

\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{//\ nest\ merge}
\DoxyCodeLine{//\ equal\ to\ merge2(stream1,\ stream2,\ stream6,\ stream3,\ [stream4,\ stream5]);}
\DoxyCodeLine{const\ streamA\ =\ merge2(stream1,\ stream2)}
\DoxyCodeLine{const\ streamB\ =\ merge2(stream3,\ [stream4,\ stream5])}
\DoxyCodeLine{const\ stream\ =\ merge2(streamA,\ streamB)}
\DoxyCodeLine{streamA.add(stream6)}

\end{DoxyCode}
\hypertarget{md_node__modules_2merge2_2README_autotoc_md18880}{}\doxysection{\texorpdfstring{API}{API}}\label{md_node__modules_2merge2_2README_autotoc_md18880}

\begin{DoxyCode}{0}
\DoxyCodeLine{const\ merge2\ =\ require('merge2')}

\end{DoxyCode}
\hypertarget{md_node__modules_2merge2_2README_autotoc_md18881}{}\doxysubsection{\texorpdfstring{merge2()}{merge2()}}\label{md_node__modules_2merge2_2README_autotoc_md18881}
\hypertarget{md_node__modules_2merge2_2README_autotoc_md18882}{}\doxysubsection{\texorpdfstring{merge2(options)}{merge2(options)}}\label{md_node__modules_2merge2_2README_autotoc_md18882}
\hypertarget{md_node__modules_2merge2_2README_autotoc_md18883}{}\doxysubsection{\texorpdfstring{merge2(stream1, stream2, ..., stream\+N)}{merge2(stream1, stream2, ..., streamN)}}\label{md_node__modules_2merge2_2README_autotoc_md18883}
\hypertarget{md_node__modules_2merge2_2README_autotoc_md18884}{}\doxysubsection{\texorpdfstring{merge2(stream1, stream2, ..., stream\+N, options)}{merge2(stream1, stream2, ..., streamN, options)}}\label{md_node__modules_2merge2_2README_autotoc_md18884}
\hypertarget{md_node__modules_2merge2_2README_autotoc_md18885}{}\doxysubsection{\texorpdfstring{merge2(stream1, \mbox{[}stream2, stream3, ...\mbox{]}, stream\+N, options)}{merge2(stream1, [stream2, stream3, ...], streamN, options)}}\label{md_node__modules_2merge2_2README_autotoc_md18885}
return a duplex stream (merged\+Stream). streams in array will be merged in parallel.\hypertarget{md_node__modules_2merge2_2README_autotoc_md18886}{}\doxysubsection{\texorpdfstring{merged\+Stream.\+add(stream)}{mergedStream.add(stream)}}\label{md_node__modules_2merge2_2README_autotoc_md18886}
\hypertarget{md_node__modules_2merge2_2README_autotoc_md18887}{}\doxysubsection{\texorpdfstring{merged\+Stream.\+add(stream1, \mbox{[}stream2, stream3, ...\mbox{]}, ...)}{mergedStream.add(stream1, [stream2, stream3, ...], ...)}}\label{md_node__modules_2merge2_2README_autotoc_md18887}
return the merged\+Stream.\hypertarget{md_node__modules_2merge2_2README_autotoc_md18888}{}\doxysubsection{\texorpdfstring{merged\+Stream.\+on(\textquotesingle{}queue\+Drain\textquotesingle{}, function() \{\})}{mergedStream.on('queueDrain', function() \{\})}}\label{md_node__modules_2merge2_2README_autotoc_md18888}
It will emit \textquotesingle{}queue\+Drain\textquotesingle{} when all streams merged. If you set {\ttfamily end === false} in options, this event give you a notice that should add more streams to merge or end the merged\+Stream.\hypertarget{md_node__modules_2merge2_2README_autotoc_md18889}{}\doxysubsubsection{\texorpdfstring{stream}{stream}}\label{md_node__modules_2merge2_2README_autotoc_md18889}
{\itshape option} Type\+: {\ttfamily Readable} or {\ttfamily Duplex} or {\ttfamily Transform} stream.\hypertarget{md_node__modules_2merge2_2README_autotoc_md18890}{}\doxysubsubsection{\texorpdfstring{options}{options}}\label{md_node__modules_2merge2_2README_autotoc_md18890}
{\itshape option} Type\+: {\ttfamily Object}.


\begin{DoxyItemize}
\item {\bfseries{end}} -\/ {\ttfamily Boolean} -\/ if {\ttfamily end === false} then merged\+Stream will not be auto ended, you should end by yourself. {\bfseries{Default\+:}} {\ttfamily undefined}
\item {\bfseries{pipe\+Error}} -\/ {\ttfamily Boolean} -\/ if {\ttfamily pipe\+Error === true} then merged\+Stream will emit {\ttfamily error} event from source streams. {\bfseries{Default\+:}} {\ttfamily undefined}
\item {\bfseries{object\+Mode}} -\/ {\ttfamily Boolean} . {\bfseries{Default\+:}} {\ttfamily true}
\end{DoxyItemize}

{\ttfamily object\+Mode} and other options({\ttfamily high\+Water\+Mark}, {\ttfamily default\+Encoding} ...) is same as Node.\+js {\ttfamily Stream}.\hypertarget{md_node__modules_2merge2_2README_autotoc_md18891}{}\doxysection{\texorpdfstring{License}{License}}\label{md_node__modules_2merge2_2README_autotoc_md18891}
MIT Â© \href{https://www.teambition.com}{\texttt{ Teambition}} 