\chapter{@webassemblyjs/wasm-\/edit}
\hypertarget{md_node__modules_2_0dwebassemblyjs_2wasm-edit_2README}{}\label{md_node__modules_2_0dwebassemblyjs_2wasm-edit_2README}\index{"@webassemblyjs/wasm-\/edit@{"@webassemblyjs/wasm-\/edit}}
\label{md_node__modules_2_0dwebassemblyjs_2wasm-edit_2README_autotoc_md4915}%
\Hypertarget{md_node__modules_2_0dwebassemblyjs_2wasm-edit_2README_autotoc_md4915}%
 \begin{quote}
Rewrite a WASM binary \end{quote}
Replace in-\/place an AST node in the binary.\hypertarget{md_node__modules_2_0dwebassemblyjs_2wasm-edit_2README_autotoc_md4916}{}\doxysection{\texorpdfstring{Installation}{Installation}}\label{md_node__modules_2_0dwebassemblyjs_2wasm-edit_2README_autotoc_md4916}

\begin{DoxyCode}{0}
\DoxyCodeLine{yarn\ add\ @webassemblyjs/wasm-\/edit}

\end{DoxyCode}
\hypertarget{md_node__modules_2_0dwebassemblyjs_2wasm-edit_2README_autotoc_md4917}{}\doxysection{\texorpdfstring{Usage}{Usage}}\label{md_node__modules_2_0dwebassemblyjs_2wasm-edit_2README_autotoc_md4917}
Update\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ edit\ \}\ from\ "{}@webassemblyjs/wasm-\/edit"{};}
\DoxyCodeLine{}
\DoxyCodeLine{const\ binary\ =\ [/*...*/];}
\DoxyCodeLine{}
\DoxyCodeLine{const\ visitors\ =\ \{}
\DoxyCodeLine{\ \ ModuleImport(\{\ node\ \})\ \{}
\DoxyCodeLine{\ \ \ \ node.module\ =\ "{}foo"{};}
\DoxyCodeLine{\ \ \ \ node.name\ =\ "{}bar"{};}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{const\ newBinary\ =\ edit(binary,\ visitors);}

\end{DoxyCode}


Replace\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ edit\ \}\ from\ "{}@webassemblyjs/wasm-\/edit"{};}
\DoxyCodeLine{}
\DoxyCodeLine{const\ binary\ =\ [/*...*/];}
\DoxyCodeLine{}
\DoxyCodeLine{const\ visitors\ =\ \{}
\DoxyCodeLine{\ \ Instr(path)\ \{}
\DoxyCodeLine{\ \ \ \ const\ newNode\ =\ t.callInstruction(t.indexLiteral(0));}
\DoxyCodeLine{\ \ \ \ path.replaceWith(newNode);}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{const\ newBinary\ =\ edit(binary,\ visitors);}

\end{DoxyCode}


Remove\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ edit\ \}\ from\ "{}@webassemblyjs/wasm-\/edit"{};}
\DoxyCodeLine{}
\DoxyCodeLine{const\ binary\ =\ [/*...*/];}
\DoxyCodeLine{}
\DoxyCodeLine{const\ visitors\ =\ \{}
\DoxyCodeLine{\ \ ModuleExport(\{\ node\ \})\ \{}
\DoxyCodeLine{\ \ \ \ path.remove()}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{const\ newBinary\ =\ edit(binary,\ visitors);}

\end{DoxyCode}


Insert\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ add\ \}\ from\ "{}@webassemblyjs/wasm-\/edit"{};}
\DoxyCodeLine{}
\DoxyCodeLine{const\ binary\ =\ [/*...*/];}
\DoxyCodeLine{}
\DoxyCodeLine{const\ newBinary\ =\ add(actualBinary,\ [}
\DoxyCodeLine{\ \ t.moduleImport("{}env"{},\ "{}mem"{},\ t.memory(t.limit(1)))}
\DoxyCodeLine{]);}

\end{DoxyCode}
\hypertarget{md_node__modules_2_0dwebassemblyjs_2wasm-edit_2README_autotoc_md4918}{}\doxysection{\texorpdfstring{Providing the AST}{Providing the AST}}\label{md_node__modules_2_0dwebassemblyjs_2wasm-edit_2README_autotoc_md4918}
Providing an AST allows you to handle the decoding yourself, here is the API\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{addWithAST(Program,\ ArrayBuffer,\ Array<Node>):\ ArrayBuffer;}
\DoxyCodeLine{editWithAST(Program,\ ArrayBuffer,\ visitors):\ ArrayBuffer;}

\end{DoxyCode}


Note that the AST will be updated in-\/place. 