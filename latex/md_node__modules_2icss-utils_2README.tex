\chapter{README}
\hypertarget{md_node__modules_2icss-utils_2README}{}\label{md_node__modules_2icss-utils_2README}\index{README@{README}}
\href{https://travis-ci.org/css-modules/icss-utils}{\texttt{ }}\hypertarget{md_node__modules_2icss-utils_2README_autotoc_md15362}{}\doxysection{\texorpdfstring{ICSS Utils}{ICSS Utils}}\label{md_node__modules_2icss-utils_2README_autotoc_md15362}
\hypertarget{md_node__modules_2icss-utils_2README_autotoc_md15363}{}\doxysubsection{\texorpdfstring{replace\+Symbols}{replaceSymbols}}\label{md_node__modules_2icss-utils_2README_autotoc_md15363}
Governs the way tokens are searched \& replaced during the linking stage of ICSS loading.

This is broken into its own module in case the behaviour needs to be replicated in other Post\+CSS plugins (i.\+e. \href{https://github.com/css-modules/postcss-modules-values}{\texttt{ CSS Modules Values}})


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ replaceSymbols,\ replaceValueSymbols\ \}\ from\ "{}icss-\/utils"{};}
\DoxyCodeLine{}
\DoxyCodeLine{replaceSymbols(css,\ replacements);}
\DoxyCodeLine{replaceValueSymbols(string,\ replacements);}

\end{DoxyCode}


Where\+:


\begin{DoxyItemize}
\item {\ttfamily css} is the Post\+CSS tree you\textquotesingle{}re working with
\item {\ttfamily replacements} is an JS object of {\ttfamily symbol\+: "{}replacement"{}} pairs, where all occurrences of {\ttfamily symbol} are replaced with {\ttfamily replacement}.
\end{DoxyItemize}

A symbol is a string of alphanumeric, {\ttfamily -\/} or {\ttfamily \+\_\+} characters. A replacement can be any string. They are replaced in the following places\+:


\begin{DoxyItemize}
\item In the value of a declaration, i.\+e. {\ttfamily color\+: my\+\_\+symbol;} or {\ttfamily box-\/shadow\+: 0 0 blur spread shadow-\/color}
\item In a media expression i.\+e. {\ttfamily @media small \{\}} or {\ttfamily @media screen and not-\/large \{\}}
\end{DoxyItemize}\hypertarget{md_node__modules_2icss-utils_2README_autotoc_md15364}{}\doxysubsection{\texorpdfstring{extract\+ICSS(css, remove\+Rules = true, mode = \textquotesingle{}auto\textquotesingle{})}{extractICSS(css, removeRules = true, mode = 'auto')}}\label{md_node__modules_2icss-utils_2README_autotoc_md15364}
Extracts and remove (if remove\+Rules is equal true) from Post\+CSS tree {\ttfamily \+:import}, {\ttfamily @icss-\/import}, {\ttfamily \+:export} and {\ttfamily @icss-\/export} statements.


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ postcss\ from\ "{}postcss"{};}
\DoxyCodeLine{import\ \{\ extractICSS\ \}\ from\ "{}icss-\/utils"{};}
\DoxyCodeLine{}
\DoxyCodeLine{const\ css\ =\ postcss.parse(`}
\DoxyCodeLine{\ \ :import(colors)\ \{}
\DoxyCodeLine{\ \ \ \ a:\ b;}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\ \ :export\ \{}
\DoxyCodeLine{\ \ \ \ c:\ d;}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\`{});}
\DoxyCodeLine{}
\DoxyCodeLine{extractICSS(css);}
\DoxyCodeLine{/*}
\DoxyCodeLine{\ \ \{}
\DoxyCodeLine{\ \ \ \ icssImports:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ colors:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ a:\ 'b'}
\DoxyCodeLine{\ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \},}
\DoxyCodeLine{\ \ \ \ icssExports:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ c:\ 'd'}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{*/}

\end{DoxyCode}


By default both the pseudo and at-\/rule form of the import and export statements will be removed. Pass the {\ttfamily mode} option to limit to only one type.\hypertarget{md_node__modules_2icss-utils_2README_autotoc_md15365}{}\doxysubsection{\texorpdfstring{create\+ICSSRules(icss\+Imports, icss\+Exports, mode = \textquotesingle{}rule\textquotesingle{})}{createICSSRules(icssImports, icssExports, mode = 'rule')}}\label{md_node__modules_2icss-utils_2README_autotoc_md15365}
Converts icss imports and exports definitions to postcss ast


\begin{DoxyCode}{0}
\DoxyCodeLine{createICSSRules(}
\DoxyCodeLine{\ \ \{}
\DoxyCodeLine{\ \ \ \ colors:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ a:\ "{}b"{},}
\DoxyCodeLine{\ \ \ \ \},}
\DoxyCodeLine{\ \ \},}
\DoxyCodeLine{\ \ \{}
\DoxyCodeLine{\ \ \ \ c:\ "{}d"{},}
\DoxyCodeLine{\ \ \},}
\DoxyCodeLine{\ \ //\ Need\ pass\ \`{}rule`\ and\ \`{}decl`\ from\ postcss}
\DoxyCodeLine{\ \ //\ Please\ look\ at\ \`{}Step\ 4`\ https://evilmartians.com/chronicles/postcss-\/8-\/plugin-\/migration}
\DoxyCodeLine{\ \ postcss}
\DoxyCodeLine{);}

\end{DoxyCode}


By default it will create pseudo selector rules ({\ttfamily \+:import} and {\ttfamily \+:export}). Pass {\ttfamily at-\/rule} for {\ttfamily mode} to instead generate {\ttfamily @icss-\/import} and {\ttfamily @icss-\/export}, which may be more resilient to post processing by other tools.\hypertarget{md_node__modules_2icss-utils_2README_autotoc_md15366}{}\doxysubsection{\texorpdfstring{License}{License}}\label{md_node__modules_2icss-utils_2README_autotoc_md15366}
ISC

\DoxyHorRuler{0}


Glen Maddern, Bogdan Chadkin and Evilebottnawi 2015-\/present. 