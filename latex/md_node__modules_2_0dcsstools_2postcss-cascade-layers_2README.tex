\chapter{Post\+CSS Cascade Layers \texorpdfstring{$<$}{<}a href="{}https\+://github.\+com/postcss/postcss"{} \texorpdfstring{$>$}{>}\texorpdfstring{$<$}{<}img src=\textbackslash{}"{}https\+://postcss.\+github.\+io/postcss/logo.\+svg\textbackslash{}"{} alt=\textbackslash{}"{}\+Post\+CSS Logo\textbackslash{}"{} width=\textbackslash{}"{}90\textbackslash{}"{} height=\textbackslash{}"{}90\textbackslash{}"{} align=\textbackslash{}"{}right\textbackslash{}"{}\texorpdfstring{$>$}{>}\texorpdfstring{$<$}{<}/a\texorpdfstring{$>$}{>}}
\hypertarget{md_node__modules_2_0dcsstools_2postcss-cascade-layers_2README}{}\label{md_node__modules_2_0dcsstools_2postcss-cascade-layers_2README}\index{PostCSS Cascade Layers $<$a href="{}https://github.com/postcss/postcss"{} $>$$<$img src=\textbackslash{}"{}https://postcss.github.io/postcss/logo.svg\textbackslash{}"{} alt=\textbackslash{}"{}PostCSS Logo\textbackslash{}"{} width=\textbackslash{}"{}90\textbackslash{}"{} height=\textbackslash{}"{}90\textbackslash{}"{} align=\textbackslash{}"{}right\textbackslash{}"{}$>$$<$/a$>$@{PostCSS Cascade Layers $<$a href=""https://github.com/postcss/postcss"" $>$$<$img src=\textbackslash{}""https://postcss.github.io/postcss/logo.svg\textbackslash{}"" alt=\textbackslash{}""PostCSS Logo\textbackslash{}"" width=\textbackslash{}""90\textbackslash{}"" height=\textbackslash{}""90\textbackslash{}"" align=\textbackslash{}""right\textbackslash{}""$>$$<$/a$>$}}
\label{md_node__modules_2_0dcsstools_2postcss-cascade-layers_2README_autotoc_md615}%
\Hypertarget{md_node__modules_2_0dcsstools_2postcss-cascade-layers_2README_autotoc_md615}%
 \href{https://www.npmjs.com/package/@csstools/postcss-cascade-layers}{\texttt{ \texorpdfstring{$<$}{<}img alt="{}npm version"{} src="{}https\+://img.\+shields.\+io/npm/v/@csstools/postcss-\/cascade-\/layers.\+svg"{} height="{}20"{}\texorpdfstring{$>$}{>}}} \href{https://cssdb.org/\#cascade-layers}{\texttt{ \texorpdfstring{$<$}{<}img alt="{}CSS Standard Status"{} src="{}https\+://cssdb.\+org/images/badges/cascade-\/layers.\+svg"{} height="{}20"{}\texorpdfstring{$>$}{>}}} \href{https://github.com/csstools/postcss-plugins/actions/workflows/test.yml?query=workflow/test}{\texttt{ \texorpdfstring{$<$}{<}img alt="{}Build Status"{} src="{}https\+://github.\+com/csstools/postcss-\/plugins/workflows/test/badge.\+svg"{} height="{}20"{}\texorpdfstring{$>$}{>}}} \href{https://discord.gg/bUadyRwkJS}{\texttt{ \texorpdfstring{$<$}{<}img alt="{}Discord"{} src="{}https\+://shields.\+io/badge/\+Discord-\/5865\+F2?logo=discord\&logo\+Color=white"{}\texorpdfstring{$>$}{>}}}

\href{https://github.com/csstools/postcss-plugins/tree/main/plugins/postcss-cascade-layers}{\texttt{ Post\+CSS Cascade Layers}} lets you use {\ttfamily @layer} following the \href{https://www.w3.org/TR/css-cascade-5/\#layering}{\texttt{ Cascade Layers Specification}}. For more information on layers, checkout \href{https://css-tricks.com/css-cascade-layers/}{\texttt{ A Complete Guide to CSS Cascade Layers}} by Miriam Suzanne.


\begin{DoxyCode}{0}
\DoxyCodeLine{target\ \{}
\DoxyCodeLine{\ \ \ \ color:\ purple;}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{@layer\ \{}
\DoxyCodeLine{\ \ \ \ target\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ color:\ green;}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{/*\ becomes\ */}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{target:not(\#\(\backslash\)\#)\ \{}
\DoxyCodeLine{\ \ \ \ color:\ purple;}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{target\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ color:\ green;}
\DoxyCodeLine{\ \ \ \ \}}

\end{DoxyCode}
\hypertarget{md_node__modules_2_0dcsstools_2postcss-cascade-layers_2README_autotoc_md616}{}\doxysection{\texorpdfstring{How it works}{How it works}}\label{md_node__modules_2_0dcsstools_2postcss-cascade-layers_2README_autotoc_md616}
\href{https://github.com/csstools/postcss-plugins/tree/main/plugins/postcss-cascade-layers}{\texttt{ Post\+CSS Cascade Layers}} creates "{}layers"{} of specificity.

It applies extra specificity on all your styles based on \+:
\begin{DoxyItemize}
\item the most specific selector found
\item the order in which layers are defined
\end{DoxyItemize}


\begin{DoxyCode}{0}
\DoxyCodeLine{@layer\ A,\ B;}
\DoxyCodeLine{}
\DoxyCodeLine{@layer\ B\ \{}
\DoxyCodeLine{\ \ \ \ .a-\/less-\/specific-\/selector\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ /*\ styles\ */}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{@layer\ A\ \{}
\DoxyCodeLine{\ \ \ \ \#something\ \#very-\/specific\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ /*\ styles\ */}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{@layer\ C\ \{}
\DoxyCodeLine{\ \ \ \ .a-\/less-\/specific-\/selector\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ /*\ styles\ */}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}


most specific selector \+:
\begin{DoxyItemize}
\item {\ttfamily \#something \#very-\/specific}
\item {\ttfamily \mbox{[}2, 0, 0\mbox{]}}
\item {\ttfamily 2 + 1} -\/\texorpdfstring{$>$}{>} {\ttfamily 3} to ensure there is no overlap
\end{DoxyItemize}

the order in which layers are defined \+:
\begin{DoxyItemize}
\item {\ttfamily A}
\item {\ttfamily B}
\item {\ttfamily C}
\end{DoxyItemize}

\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{4}{|X[-1]}|}
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ layer   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ previous adjustment   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ specificity adjustment   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ selector    }\\\cline{1-4}
\endfirsthead
\hline
\endfoot
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ layer   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ previous adjustment   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ specificity adjustment   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ selector    }\\\cline{1-4}
\endhead
{\ttfamily A}   &{\ttfamily 0}   &{\ttfamily 0 + 0 = 0}   &N/A    \\\cline{1-4}
{\ttfamily B}   &{\ttfamily 0}   &{\ttfamily 0 + 3 = 3}   &{\ttfamily \+:not(\#/\#)\+:not(\#/\#)\+:not(\#/\#)}    \\\cline{1-4}
{\ttfamily C}   &{\ttfamily 3}   &{\ttfamily 3 + 3 = 6}   &{\ttfamily \+:not(\#/\#)\+:not(\#/\#)\+:not(\#/\#)\+:not(\#/\#)\+:not(\#/\#)\+:not(\#/\#)}   \\\cline{1-4}
\end{longtabu}


This approach lets more important (later) layers always override less important (earlier) layers.~\newline
 And layers have enough room internally so that each selector works and overrides as expected.

More layers with more specificity will cause longer {\ttfamily \+:not(...)} selectors to be generated.

⚠️ For this to work the plugin needs to analyze your entire stylesheet at once.~\newline
 If you have different assets that are unaware of each other it will not work correctly as the analysis will be incorrect.\hypertarget{md_node__modules_2_0dcsstools_2postcss-cascade-layers_2README_autotoc_md617}{}\doxysection{\texorpdfstring{Usage}{Usage}}\label{md_node__modules_2_0dcsstools_2postcss-cascade-layers_2README_autotoc_md617}
Add \href{https://github.com/csstools/postcss-plugins/tree/main/plugins/postcss-cascade-layers}{\texttt{ Post\+CSS Cascade Layers}} to your project\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{npm\ install\ postcss\ @csstools/postcss-\/cascade-\/layers\ -\/-\/save-\/dev}

\end{DoxyCode}


Use it as a \href{https://github.com/postcss/postcss}{\texttt{ Post\+CSS}} plugin\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ postcss\ =\ require('postcss');}
\DoxyCodeLine{const\ postcssCascadeLayers\ =\ require('@csstools/postcss-\/cascade-\/layers');}
\DoxyCodeLine{}
\DoxyCodeLine{postcss([}
\DoxyCodeLine{\ \ \ \ postcssCascadeLayers(/*\ pluginOptions\ */)}
\DoxyCodeLine{]).process(YOUR\_CSS\ /*,\ processOptions\ */);}

\end{DoxyCode}


\href{https://github.com/csstools/postcss-plugins/tree/main/plugins/postcss-cascade-layers}{\texttt{ Post\+CSS Cascade Layers}} runs in all Node environments, with special instructions for\+:

\texorpdfstring{$\vert$}{|} \href{INSTALL.md\#node}{\texttt{ Node}} \texorpdfstring{$\vert$}{|} \href{INSTALL.md\#postcss-cli}{\texttt{ Post\+CSS CLI}} \texorpdfstring{$\vert$}{|} \href{INSTALL.md\#webpack}{\texttt{ Webpack}} \texorpdfstring{$\vert$}{|} \href{INSTALL.md\#create-react-app}{\texttt{ Create React App}} \texorpdfstring{$\vert$}{|} \href{INSTALL.md\#gulp}{\texttt{ Gulp}} \texorpdfstring{$\vert$}{|} \href{INSTALL.md\#grunt}{\texttt{ Grunt}} \texorpdfstring{$\vert$}{|} \texorpdfstring{$\vert$}{|} --- \texorpdfstring{$\vert$}{|} --- \texorpdfstring{$\vert$}{|} --- \texorpdfstring{$\vert$}{|} --- \texorpdfstring{$\vert$}{|} --- \texorpdfstring{$\vert$}{|} --- \texorpdfstring{$\vert$}{|}\hypertarget{md_node__modules_2_0dcsstools_2postcss-cascade-layers_2README_autotoc_md618}{}\doxysection{\texorpdfstring{Options}{Options}}\label{md_node__modules_2_0dcsstools_2postcss-cascade-layers_2README_autotoc_md618}
\hypertarget{md_node__modules_2_0dcsstools_2postcss-cascade-layers_2README_autotoc_md619}{}\doxysubsection{\texorpdfstring{on\+Revert\+Layer\+Keyword}{onRevertLayerKeyword}}\label{md_node__modules_2_0dcsstools_2postcss-cascade-layers_2README_autotoc_md619}
The {\ttfamily on\+Revert\+Layer\+Keyword} option enables warnings if {\ttfamily revert-\/layer} is used. Transforming {\ttfamily revert-\/layer} for older browsers is not possible in this plugin.

Defaults to {\ttfamily warn}


\begin{DoxyCode}{0}
\DoxyCodeLine{postcssCascadeLayers(\{\ onRevertLayerKeyword:\ 'warn'\ \})\ //\ 'warn'\ |\ false}

\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{/*\ [postcss-\/cascade-\/layers]:\ handling\ "{}revert-\/layer"{}\ is\ unsupported\ by\ this\ plugin\ and\ will\ cause\ style\ differences\ between\ browser\ versions.\ */}
\DoxyCodeLine{@layer\ \{}
\DoxyCodeLine{\ \ \ \ .foo\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ color:\ revert-\/layer;}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md_node__modules_2_0dcsstools_2postcss-cascade-layers_2README_autotoc_md620}{}\doxysubsection{\texorpdfstring{on\+Conditional\+Rules\+Changing\+Layer\+Order}{onConditionalRulesChangingLayerOrder}}\label{md_node__modules_2_0dcsstools_2postcss-cascade-layers_2README_autotoc_md620}
The {\ttfamily on\+Conditional\+Rules\+Changing\+Layer\+Order} option enables warnings if layers are declared in multiple different orders in conditional rules. Transforming these layers correctly for older browsers is not possible in this plugin.

Defaults to {\ttfamily warn}


\begin{DoxyCode}{0}
\DoxyCodeLine{postcssCascadeLayers(\{\ onConditionalRulesChangingLayerOrder:\ 'warn'\ \})\ //\ 'warn'\ |\ false}

\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{/*\ [postcss-\/cascade-\/layers]:\ handling\ different\ layer\ orders\ in\ conditional\ rules\ is\ unsupported\ by\ this\ plugin\ and\ will\ cause\ style\ differences\ between\ browser\ versions.\ */}
\DoxyCodeLine{@media\ (min-\/width:\ 10px)\ \{}
\DoxyCodeLine{\ \ \ \ @layer\ B\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ .foo\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ color:\ red;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{@layer\ A\ \{}
\DoxyCodeLine{\ \ \ \ .foo\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ color:\ pink;}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{@layer\ B\ \{}
\DoxyCodeLine{\ \ \ \ .foo\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ color:\ red;}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md_node__modules_2_0dcsstools_2postcss-cascade-layers_2README_autotoc_md621}{}\doxysubsection{\texorpdfstring{on\+Import\+Layer\+Rule}{onImportLayerRule}}\label{md_node__modules_2_0dcsstools_2postcss-cascade-layers_2README_autotoc_md621}
The {\ttfamily @import} at-\/rule can also be used with cascade layers, specifically to create a new layer like so\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{@import\ 'theme.css'\ layer(utilities);}

\end{DoxyCode}
 If your CSS uses {\ttfamily @import} with layers, you will also need the \href{https://github.com/postcss/postcss-import}{\texttt{ postcss-\/import}} plugin. This plugin alone will not handle the {\ttfamily @import} at-\/rule. ~\newline


This plugin will warn you when it detects that \href{https://github.com/postcss/postcss-import}{\texttt{ postcss-\/import}} did not transform{\ttfamily @import} at-\/rules.


\begin{DoxyCode}{0}
\DoxyCodeLine{postcssCascadeLayers(\{\ onImportLayerRule:\ 'warn'\ \})\ //\ 'warn'\ |\ false}

\end{DoxyCode}
\hypertarget{md_node__modules_2_0dcsstools_2postcss-cascade-layers_2README_autotoc_md622}{}\doxysubsection{\texorpdfstring{Contributors}{Contributors}}\label{md_node__modules_2_0dcsstools_2postcss-cascade-layers_2README_autotoc_md622}
The contributors to this plugin were \href{https://github.com/oluoluoxenfree}{\texttt{ Olu Niyi-\/\+Awosusi}} and \href{https://github.com/sanajaved7}{\texttt{ Sana Javed}} from \href{https://github.com/oddbird}{\texttt{ Oddbird}} and Romain Menke. 